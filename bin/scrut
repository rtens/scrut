#!/usr/bin/env php
<?php

use rtens\scrut\cli\ScrutCommand;

$requireAutoload = function ($autoloaders) {
    foreach ($autoloaders as $file) {
        if (file_exists($file)) {
            require_once($file);
            return true;
        }
    }
    return false;
};

$autoloaders = [
    'bootstrap.php',
    'autoload.php',
    'vendor' . DIRECTORY_SEPARATOR . 'autoload.php',
];

if (!$requireAutoload($autoloaders)) {
    echo "Error: None of these auto-loaders found: [" . implode(', ', $autoloaders) . ']';
    exit(2);
}

$command = new ScrutCommand(getcwd(), $argv);
exit($command->execute());
